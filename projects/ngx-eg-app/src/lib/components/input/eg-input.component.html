@if (label) {
    <ion-input
        #ionInput
        [id]="(_id || label) | idGenerator:'input'"
        [fill]="fill"
        [type]="type"
        [label]="label"
        [maskito]="_mask"
        [(ngModel)]="value"
        [disabled]="disabled"
        [maxlength]="maxlength"
        [placeholder]="placeholder"
        [maskitoElement]="maskPredicate"
        [labelPlacement]="labelPlacement"
        [attr.aria-describedby]="(_id || label) | idGenerator:'alert'"
        [attr.autocomplete]="autocomplete"
        [ngClass]="{ 'input-error': showError || showCustomError, 'label-required': required, 'show-currency': hasCurrencyClass }"
        class="{{ currency }}"
        (ionFocus)="onFocus()"
        (ionBlur)="onBlur($event)"
        (ionInput)="handleChange($event)"
        >
            <ng-container *ngTemplateOutlet="prefixIconContainer"></ng-container>
            <ng-container *ngTemplateOutlet="buttonAcionContainer"></ng-container>
            <ng-container *ngTemplateOutlet="suffixIconContainer"></ng-container>
    </ion-input>
    <div class="input-alert">
        <ion-note [ngClass]="{ 'input-alert-hint': !showError && !showCustomError }" [id]="(_id || label) | idGenerator:'alert'" [color]="showError || showCustomError ? 'danger' : 'default'">
            <ng-content></ng-content>
            @if (!showCustomError) {
                {{ showError ? errorMessage : hint }}
            }
        </ion-note>
    </div>
}

<ng-template #prefixIconContainer>
    @if(prefixIcon) {
        <ion-icon class="prefix" slot="start" [name]="prefixIcon" aria-hidden="true"></ion-icon>
    }
</ng-template>

<ng-template #suffixIconContainer>
    @if (suffixIcon && !actions.length) {
        <ion-icon class="suffix" slot="end" [name]="suffixIcon" aria-hidden="true"></ion-icon>
    }
</ng-template>

<ng-template #buttonAcionContainer>
    @if (actions.length) {
        @for (action of actions; track action) {
            <ion-button
                slot="end"
                fill="clear"
                type="button"
                [ngClass]="{ 'input-error-icon': showError }"
                [attr.aria-label]="action?.ariaLabel"
                [style.visibility]="visibilityOnClearButton(action.action) ? 'visible' : 'hidden'"
                (click)="action?.click($event)"
            >
                <ion-icon slot="icon-only" [name]="action.icon" aria-hidden="true"></ion-icon>
            </ion-button>
        }
    }
</ng-template>
